window.__require=function t(e,o,n){function r(i,p){if(!o[i]){if(!e[i]){var a=i.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!p&&u)return u(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+i+"'")}}var s=o[i]={exports:{}};e[i][0].call(s.exports,function(t){return r(e[i][1][t]||t)},s,s.exports,t,e,o,n)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({BulletCpt:[function(t,e,o){"use strict";cc._RF.push(e,"784bdJ4OtBOPqELe5jvLo5Y","BulletCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e}return n(e,t),e=r([i],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],ButtonEventCpt:[function(t,e,o){"use strict";cc._RF.push(e,"e059fYHEfZGjKfD5jpJww7h","ButtonEventCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="event_key",e}return n(e,t),e.prototype.start=function(){var t=this;this.node.on("click",function(){gm.EventManager.dispatchEvent(t.key)},this)},r([p],e.prototype,"key",void 0),e=r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],CardConfig:[function(t,e,o){"use strict";var n;cc._RF.push(e,"571e8x/oI9E+bYLMyWzvpck","CardConfig"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.NUMBER=0]="NUMBER",t[t.SYMBOL=1]="SYMBOL"}(n=o.CardType||(o.CardType={}));for(var r=[],c=1;c<=9;c++)r.push({type:n.NUMBER,value:c});var i=[{type:n.SYMBOL,value:"+"},{type:n.SYMBOL,value:"-"}];o.CardConfig={getRandomConfigByType:function(t){return t==n.NUMBER?r[Math.floor(Math.random()*r.length)]:t==n.SYMBOL?i[Math.floor(Math.random()*i.length)]:void 0}},cc._RF.pop()},{}],CardLayoutCpt:[function(t,e,o){"use strict";cc._RF.push(e,"604b6arVR9GFZpnDV/9Ygva","CardLayoutCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=50,e.type="",e}return n(e,t),r([p(cc.Float)],e.prototype,"padding",void 0),r([p(cc.String)],e.prototype,"type",void 0),e=r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],DebugDraw:[function(t,e,o){"use strict";cc._RF.push(e,"a3ddfW/lZNLqpHhQuTtY3Ro","DebugDraw");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){var t=this.getComponent(cc.Graphics);if(t){var e=this.node.getContentSize();t.rect(-.5*e.width,-.5*e.height,e.width,e.height),t.stroke()}},e=r([i],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],DialogCpt:[function(t,e,o){"use strict";cc._RF.push(e,"04a6e2sf29Cs6ZasES1qzTK","DialogCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentLabel=null,e._content="",e.okButton=null,e}return n(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.contentLabel&&(this.contentLabel.string=t)},enumerable:!0,configurable:!0}),r([p(cc.Label)],e.prototype,"contentLabel",void 0),r([p(cc.Button)],e.prototype,"okButton",void 0),e=r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"1e61cfm3p9EKKjfUiEVG/qU","EventManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){gm=gm||{},gm.EventManager=this},e.prototype.addEvent=function(t,e,o){this.node.on(t,e,o)},e.prototype.addEventOnce=function(t,e,o){this.node.once(t,e,o)},e.prototype.removeEvent=function(t,e,o){this.node.off(t,e,o)},e.prototype.dispatchEvent=function(t,e){this.node.emit(t,e)},e=r([i],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],FortSingleton:[function(t,e,o){"use strict";cc._RF.push(e,"8bf31uGnZFFTpK+PjFf71nP","FortSingleton");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lemon/ECS/Singleton"),i=t("../Component/NumberCardCpt"),p=t("../Component/MonsterCpt"),a=t("../../Lemon/Common/ResMapCpt"),u=t("../Component/BulletCpt"),s=cc._decorator,l=s.ccclass,f=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressLabel=null,e.cardCenterPos=null,e.numberCount=9,e.col=3,e.padding=110,e.hpLimit=3,e._hp=0,e.goldCount=0,e}return n(e,t),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(t){this._hp=t,this.progressLabel.string=Math.floor(t).toString(),t<=0&&gm.EventManager.dispatchEvent("game_over")},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.hp=this.hpLimit},e.prototype.onUpdate=function(t){for(var e=0,o=this.getCpts(i.default,function(t){return 1==t.isSelect&&(e+=t.value,!0)}),n=0,r=this.getCpts(p.default);n<r.length;n++){var c=r[n];if(c.value==e){for(var s=0,l=o;s<l.length;s++){var f=l[s];f.isSelect=!1,f.value=Math.floor(9*Math.random())+1}var d=this.getCpt(a.default),h=cc.instantiate(d.bulletPrefab);h.parent=cc.director.getScene(),h.position=this.node.convertToWorldSpaceAR(cc.v2()),h.getComponent(u.default).target=c;break}}for(var y=0,_=this.getCpts(u.default);y<_.length;y++){var v=_[y],g=v.target.node.position.sub(v.node.position);g.magSqr()<=200?(v.target.node.destroy(),v.node.destroy(),this.getCptById("gold_label").getComponent(cc.Label).string=(++this.goldCount).toString()):v.node.position=v.node.position.add(g.normalize().mulSelf(2e3*t))}},e.prototype.createNumberCard=function(){var t=this.getCpt(a.default),e=cc.instantiate(t.numberCardPrefab);e.parent=cc.director.getScene(),e.position=this.node.convertToWorldSpaceAR(cc.v2());var o=e.getComponent(i.default);return o.value=Math.floor(9*Math.random())+1,o.isSelect=!1,e},e.prototype.initNumberCards=function(){for(var t=this.numberCount-this.getCpts(i.default).length,e=0;e<t;e++)this.createNumberCard()},e.prototype.updateCardsPos=function(){for(var t=this.getCpts(i.default),e=0;e<t.length;e++){var o=e%this.col,n=Math.floor(e/this.col),r=this.cardCenterPos.convertToWorldSpaceAR(cc.v2()).add(cc.v2(-.5*(this.col-1)*this.padding,-this.padding/2));t[e].node.runAction(cc.moveTo(.3,r.add(cc.v2(o*this.padding,-n*this.padding))).easing(cc.easeQuarticActionOut()))}},e.prototype.slowTime=function(){throw new Error("Method not implemented.")},r([f(cc.Label)],e.prototype,"progressLabel",void 0),r([f(cc.Node)],e.prototype,"cardCenterPos",void 0),r([f],e.prototype,"numberCount",void 0),r([f],e.prototype,"col",void 0),r([f],e.prototype,"padding",void 0),r([f],e.prototype,"hpLimit",void 0),r([f],e.prototype,"hp",null),e=r([l],e)}(c.default);o.default=d,cc._RF.pop()},{"../../Lemon/Common/ResMapCpt":"ResMapCpt","../../Lemon/ECS/Singleton":"Singleton","../Component/BulletCpt":"BulletCpt","../Component/MonsterCpt":"MonsterCpt","../Component/NumberCardCpt":"NumberCardCpt"}],GM:[function(t,e,o){"use strict";cc._RF.push(e,"bd9bdbbbM5DLZMpX7C8rhF4","GM");cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.gm=this,cc.game.addPersistRootNode(this.node)},getSge:function(t){return this.node.getComponent(t)},getLocalItem:function(t){var e=cc.sys.localStorage.getItem(t);return JSON.parse(e)},setLocalItem:function(t,e){var o=JSON.stringify(e);cc.sys.localStorage.setItem(t,o)},onDestroy:function(){}});cc._RF.pop()},{}],IdCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d688aPaKmJGEK/8OIcFjhFd","IdCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e}return n(e,t),r([p],e.prototype,"id",void 0),e=r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],MainWorld:[function(t,e,o){"use strict";cc._RF.push(e,"e1803crFkhG26haPU1ZcBKm","MainWorld");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lemon/ECS/World"),i=cc._decorator,p=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){gm.EventManager.addEvent("go_to_game",function(){cc.director.loadScene("Game")},this)},e=r([p],e)}(c.default));o.default=a,cc._RF.pop()},{"../../Lemon/ECS/World":"World"}],MonsterCpt:[function(t,e,o){"use strict";cc._RF.push(e,"22e7f9B3QpNLbjl2Lb8bLpa","MonsterCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bodySprite=null,e.valueLabel=null,e._value=1,e.speed=10,e.waitPos=null,e.isWait=!1,e.targetPos=null,e}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.valueLabel&&(this.valueLabel.string=t.toString())},enumerable:!0,configurable:!0}),r([p(cc.Sprite)],e.prototype,"bodySprite",void 0),r([p(cc.Label)],e.prototype,"valueLabel",void 0),e=r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],MonsterSingleton:[function(t,e,o){"use strict";cc._RF.push(e,"b46e5spTJ5FLK4BJr5gcEW+","MonsterSingleton");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lemon/ECS/Singleton"),i=t("../Component/MonsterCpt"),p=t("../../Lemon/Common/ResMapCpt"),a=t("./FortSingleton"),u=cc._decorator,s=u.ccclass,l=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=0,e.isEnd=!1,e.isPass=!1,e}return n(e,t),e.prototype.ready=function(){this.isEnd=!1,this.isPass=!1,this.level++;for(var t=2*this.level,e=0;e<t;e++)this.createMonster()},e.prototype.clearAllMonster=function(){for(var t=0,e=this.getCpts(i.default);t<e.length;t++){e[t].node.destroy()}},e.prototype.createMonster=function(){var t=this.getCpt(p.default),e=cc.instantiate(t.monsterPrefab);e.parent=cc.director.getScene();var o=Math.random()*cc.winSize.width;o=Math.min(cc.winSize.width-30,o),o=Math.max(30,o),e.position=cc.v2(o,cc.winSize.height+60+200*Math.random());var n=e.getComponent(i.default);return n.value=Math.floor(10+10*Math.random()),n.speed=50,n.targetPos=this.getCpt(a.default).node.convertToWorldSpaceAR(cc.v2()),n.waitPos=cc.v2(o,cc.winSize.height-100),e},e.prototype.onUpdate=function(t){if(!this.isEnd){for(var e=this.getCpts(i.default),o=0,n=e;o<n.length;o++){var r=n[o],c=r.targetPos.sub(r.node.position);if(r.node.position=r.node.position.add(c.normalize().mulSelf(r.speed*t)),c.magSqr()<=900)r.node.destroy(),--this.getCpt(a.default).hp<=0&&(this.clearAllMonster(),this.isEnd=!0)}!this.isPass&&e.length<=0&&(this.isPass=!0,gm.EventManager.dispatchEvent("go_to_next_level"))}},e=r([s],e)}(c.default));o.default=l,cc._RF.pop()},{"../../Lemon/Common/ResMapCpt":"ResMapCpt","../../Lemon/ECS/Singleton":"Singleton","../Component/MonsterCpt":"MonsterCpt","./FortSingleton":"FortSingleton"}],NumberCardCpt:[function(t,e,o){"use strict";cc._RF.push(e,"74ce7mbl7FDIa1ZUV4DWVx5","NumberCardCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueLabel=null,e._value=1,e.selectSprite=null,e._isSelect=!1,e}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.valueLabel&&(this.valueLabel.string=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelect",{get:function(){return this._isSelect},set:function(t){this._isSelect=t,this.selectSprite&&(this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.07,1.2),cc.scaleTo(.07,1))),this.selectSprite.node.active=t)},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.isSelect=!t.isSelect})},r([p(cc.Label)],e.prototype,"valueLabel",void 0),r([p(cc.Sprite)],e.prototype,"selectSprite",void 0),e=r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],NumberWorld:[function(t,e,o){"use strict";cc._RF.push(e,"9df0asShtdNxZvPGn2npZOH","NumberWorld");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lemon/ECS/World"),i=t("../Singleton/MonsterSingleton"),p=t("../Singleton/FortSingleton"),a=t("../../Lemon/Common/System/PopupSingleton"),u=cc._decorator,s=u.ccclass,l=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){var t=this;gm.EventManager.addEvent("go_to_main",function(){cc.director.loadScene("Main")},this),gm.EventManager.addEvent("go_to_next_level",function(){t.getCptById("next_hit").node.runAction(cc.moveTo(1,cc.v2(0,200))),t.scheduleOnce(function(){t.getCptById("next_hit").node.runAction(cc.moveTo(1,cc.v2(0,900))),t.monsterSingleton.ready()},3)},this),gm.EventManager.addEvent("game_over",function(){t.getCpt(a.default).addDialog("\u6e38\u620f\u5f97\u5206"+t.fortSingleton.goldCount+",\u70b9\u51fb\u8fd4\u56de\u4e3b\u754c\u9762",{clickCallback:function(){gm.EventManager.dispatchEvent("go_to_main")},closeMaskTouch:!0})},this)},e.prototype.start=function(){this.fortSingleton=this.getCpt(p.default),this.fortSingleton.initNumberCards(),this.fortSingleton.updateCardsPos(),this.monsterSingleton=this.getCpt(i.default)},e.prototype.onUpdate=function(t){},e=r([s],e)}(c.default));o.default=l,cc._RF.pop()},{"../../Lemon/Common/System/PopupSingleton":"PopupSingleton","../../Lemon/ECS/World":"World","../Singleton/FortSingleton":"FortSingleton","../Singleton/MonsterSingleton":"MonsterSingleton"}],PopupCpt:[function(t,e,o){"use strict";cc._RF.push(e,"34d848p/DhEea5oaPZOrtZ5","PopupCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpen=!1,e.index=1,e.closeMaskTouch=!1,e}return n(e,t),r([p],e.prototype,"isOpen",void 0),e=r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PopupScaleInCpt:[function(t,e,o){"use strict";cc._RF.push(e,"99797VaKFdKk6gPFv9TkSU8","PopupScaleInCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){this.node.scale=.01,this.node.runAction(cc.scaleTo(.15,1).easing(cc.easeQuarticActionOut()))},e=r([i],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],PopupSingleton:[function(t,e,o){"use strict";cc._RF.push(e,"de327wla3dFC4VCZijysFj5","PopupSingleton");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Component/PopupCpt"),i=t("../Component/DialogCpt"),p=t("../Component/PopupScaleInCpt"),a=t("../../ECS/Singleton"),u=cc._decorator,s=u.ccclass,l=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogPrefab=null,e.maskPrefab=null,e.maskNode=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.maskNode=cc.instantiate(this.maskPrefab),cc.game.addPersistRootNode(this.maskNode),this.maskNode.parent=cc.director.getScene(),this.maskNode.active=!1,this.maskNode.zIndex=-100,this.maskNode.on(cc.Node.EventType.TOUCH_END,function(){t.getTopPopup().closeMaskTouch||t.removeTopPopup()},this),gm.EventManager.addEvent("event_remove_popup_top",this.removeTopPopup,this),gm.EventManager.addEvent("event_dialog_ok",this.onDialogClickOk,this)},e.prototype.onDialogClickOk=function(t){cc.log(t)},e.prototype.getTopPopup=function(){var t=this.getCpts(c.default,function(t){return 0==t.isOpen});return t.sort(function(t,e){return t.index-e.index}),t.pop()},e.prototype.removeTopPopup=function(){var t=this.getTopPopup();t&&t.node.destroy(),this.scheduleOnce(this.onUpdatePopup)},e.prototype.onUpdatePopup=function(){var t=this.getCpts(c.default,function(t){return 0==t.isOpen});if(t.sort(function(t,e){return t.index-e.index}),t.length>0)for(var e=0;e<t.length;e++){var o=t[e];this.maskNode.active=!0,o.node.zIndex=1e3+2*o.index,e==t.length-1&&(this.maskNode.zIndex=1e3+2*o.index-1)}else this.maskNode.active=!1,this.maskNode.zIndex=-100},e.prototype.addPopupByNode=function(t,e){e=e||{};var o=this.getCpts(c.default),n=t.addComponent(c.default);n.isOpen=!1,n.index=o.length+1,e.closeMaskTouch&&(n.closeMaskTouch=e.closeMaskTouch),this.onUpdatePopup()},e.prototype.addDialog=function(t,e){e=e||{};var o=cc.instantiate(this.dialogPrefab);o.parent=cc.director.getScene(),o.position=cc.v2(cc.winSize.width/2,cc.winSize.height/2),o.addComponent(p.default);var n=o.getComponent(i.default);n.content=t,e.clickCallback&&n.okButton.node.on("click",e.clickCallback),this.addPopupByNode(o,e)},r([l(cc.Prefab)],e.prototype,"dialogPrefab",void 0),r([l(cc.Prefab)],e.prototype,"maskPrefab",void 0),e=r([s],e)}(a.default);o.default=f,cc._RF.pop()},{"../../ECS/Singleton":"Singleton","../Component/DialogCpt":"DialogCpt","../Component/PopupCpt":"PopupCpt","../Component/PopupScaleInCpt":"PopupScaleInCpt"}],ResMapCpt:[function(t,e,o){"use strict";cc._RF.push(e,"63236ji1dxN/ZDTyTGynEnp","ResMapCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterPrefab=null,e.numberCardPrefab=null,e.bulletPrefab=null,e}return n(e,t),r([p(cc.Prefab)],e.prototype,"monsterPrefab",void 0),r([p(cc.Prefab)],e.prototype,"numberCardPrefab",void 0),r([p(cc.Prefab)],e.prototype,"bulletPrefab",void 0),e=r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"f9a90kmZWFGXZzWU2V3/lNv","Singleton");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./World"),i=cc._decorator,p=i.ccclass,a=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.world=null,e}return n(e,t),e.prototype.onLoad=function(){this.getWorld().addSingleton(this),this.onInit()},e.prototype.onInit=function(){},e.prototype.onUpdate=function(t){},e.prototype.getWorld=function(){return null==this.world&&(this.world=cc.find("Canvas").getComponent(c.default)),this.world},e.prototype.getCpt=function(t,e){return this.getWorld().getCpt(t,e)},e.prototype.getCpts=function(t,e){return this.getWorld().getCpts(t,e)},e.prototype.getCptById=function(t){return this.getWorld().getCptById(t)},e=r([p],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./World":"World"}],SwordCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d063aa6TGVFgqmkjTBK5jns","SwordCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterList=[],e}return n(e,t),e=r([i],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],System:[function(t,e,o){"use strict";cc._RF.push(e,"5bd56hH8OhGxLGxm5JAZwHI","System");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.world=null,e}return n(e,t),e.prototype.onInit=function(){},e.prototype.onUpdate=function(t){},e.prototype.getCpt=function(t,e){return this.world.getCpt(t,e)},e.prototype.getCpts=function(t,e){return this.world.getCpts(t,e)},e.prototype.getCptById=function(t){return this.world.getCptById(t)},e=r([i],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],World:[function(t,e,o){"use strict";cc._RF.push(e,"f63d1acW7NHU5HvsiAfmwVA","World");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Common/IdCpt"),i=cc._decorator,p=i.ccclass,a=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeScale=1,e.systemList=[],e.singletonList=[],e}return n(e,t),e.prototype.addSystem=function(t){var e=this.node.addComponent(t);return e.world=this,e.onInit(),this.systemList.push(e),e},e.prototype.addSingleton=function(t){this.singletonList.push(t)},e.prototype.getSystem=function(t){return this.node.getComponent(t)},e.prototype.getCpt=function(t,e){return this.getCpts(t,e)[0]},e.prototype.getCpts=function(t,e){for(var o=[],n=0,r=cc.director.getScene().getComponentsInChildren(t);n<r.length;n++){var c=r[n];e?e(c)&&o.push(c):o.push(c)}return o},e.prototype.getCptById=function(t){return this.getCpt(c.default,function(e){return e.id==t})},e.prototype.update=function(t){t*=this.timeScale,this.onUpdate(t);for(var e=0,o=this.systemList;e<o.length;e++){o[e].onUpdate(t)}for(var n=0,r=this.singletonList;n<r.length;n++){r[n].onUpdate(t)}},e.prototype.onUpdate=function(t){},e=r([p],e)}(cc.Component));o.default=a,cc._RF.pop()},{"../Common/IdCpt":"IdCpt"}]},{},["ButtonEventCpt","DialogCpt","PopupCpt","PopupScaleInCpt","DebugDraw","EventManager","IdCpt","ResMapCpt","PopupSingleton","Singleton","System","World","BulletCpt","CardLayoutCpt","MonsterCpt","NumberCardCpt","SwordCpt","CardConfig","GM","FortSingleton","MonsterSingleton","MainWorld","NumberWorld"]);