window.__require=function t(e,o,n){function r(i,a){if(!o[i]){if(!e[i]){var p=i.split("/");if(p=p[p.length-1],!e[p]){var u="function"==typeof __require&&__require;if(!a&&u)return u(p,!0);if(c)return c(p,!0);throw new Error("Cannot find module '"+i+"'")}i=p}var s=o[i]={exports:{}};e[i][0].call(s.exports,function(t){return r(e[i][1][t]||t)},s,s.exports,t,e,o,n)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({BallControlSge:[function(t,e,o){"use strict";cc._RF.push(e,"a3bcb0lrXNMn5IP1b9PJhUY","BallControlSge");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c,i=t("../../../Lemon/ECS/Singleton"),a=t("../Component/BallCpt"),p=t("../../../Lemon/Common/Component/LabelBlindCpt"),u=cc._decorator,s=u.ccclass,l=u.property;(function(t){t[t.WAIT=0]="WAIT",t[t.ADD=1]="ADD",t[t.CHANGE=2]="CHANGE"})(c=o.BallControlStatus||(o.BallControlStatus={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ballPrefab=null,e.ballCount=12,e.radius=200,e.rSpeed=1e3,e.aSpeed=6,e.status=c.WAIT,e.merge1=null,e.merge2=null,e.remove1=null,e.remove2=null,e}return n(e,t),e.prototype.onInit=function(){var t=this;gm.EventManager.addEvent("change_ball_red",function(){var e=t.getCpt(a.default,function(t){return t.isSelect});e&&(e.color=1,e.isSelect=!1)}),gm.EventManager.addEvent("change_ball_green",function(){var e=t.getCpt(a.default,function(t){return t.isSelect});e&&(e.color=2,e.isSelect=!1)}),gm.EventManager.addEvent("change_ball_blue",function(){var e=t.getCpt(a.default,function(t){return t.isSelect});e&&(e.color=3,e.isSelect=!1)}),this.getCpt(p.default,function(t){return"life"==t.key}).value=3,this.getCpt(p.default,function(t){return"gold"==t.key}).value=0},e.prototype.onUpdate=function(t){var e=this.getCpts(a.default);e.sort(function(t,e){return t.index-e.index});for(var o=0;o<e.length;o++)e[o].index=o+1;switch(this.status){case c.WAIT:var n=this.ballCount-e.length;if(n>0){for(o=0;o<n;o++)this.createBall();this.status=c.ADD}else for(o=0;o<e.length;o++){var r=e[o],i=e[o+1];if(i||(i=e[0]),r&&i){if(r.color==i.color){this.merge1=r,this.merge2=i,this.status=c.CHANGE;break}if(r.value==i.value){this.remove1=r,this.remove2=i,this.status=c.CHANGE;break}}}break;case c.ADD:for(o=0;o<e.length;o++)e[o].radius=this.radius,e[o].angle=2.5*Math.PI-2*Math.PI/e.length*(o+1);for(var u=!0,s=0,l=e;s<l.length;s++){var f=l[s],d=f.indexRadius-f.radius,h=f.indexAngle-f.angle;d<0?f.indexRadius=Math.min(f.indexRadius+t*this.rSpeed,f.radius):d>0?f.indexRadius=Math.max(f.indexRadius-t*this.rSpeed,f.radius):h<0?Math.abs(h)<.008?f.indexAngle=f.angle:f.indexAngle=Math.min(f.indexAngle+Math.min(.08*Math.abs(h),t*this.aSpeed),f.angle):h>0&&(Math.abs(h)<.008?f.indexAngle=f.angle:f.indexAngle=Math.max(f.indexAngle-Math.min(.08*Math.abs(h),t*this.aSpeed),f.angle)),0==d&&0==h||(u=!1,f.node.position=cc.v2(Math.cos(f.indexAngle)*f.indexRadius,Math.sin(f.indexAngle)*f.indexRadius).addSelf(this.node.convertToWorldSpaceAR(cc.v2())))}u&&(this.status=c.WAIT);break;case c.CHANGE:if(this.merge1&&this.merge2){if(this.merge1.value+=this.merge2.value,this.merge1.value>20){var y=this.getCpt(p.default,function(t){return"life"==t.key});y.value-=1,y.value<=0&&gm.EventManager.dispatchEvent("game_over")}this.merge2.node.destroy(),this.merge1=null,this.merge2=null,this.status=c.WAIT}else this.remove1&&this.remove2&&(this.remove1.node.destroy(),this.remove2.node.destroy(),this.getCpt(p.default,function(t){return"gold"==t.key}).value+=this.remove1.value,this.remove1=null,this.remove2=null,this.status=c.WAIT)}},e.prototype.createBall=function(){var t=this,e=this.getCpts(a.default);e.sort(function(t,e){return t.index-e.index});var o=cc.instantiate(this.ballPrefab);o.parent=cc.director.getScene();var n=o.getComponent(a.default);n.index=e.length+1,o.on(cc.Node.EventType.TOUCH_END,function(e){for(var o=0,r=t.getCpts(a.default);o<r.length;o++){r[o].isSelect=!1}n.isSelect=!n.isSelect});for(var r=e[0],c=e[e.length-1],i=[],p=1;p<=3;p++)c&&c.color==p||e.length==this.ballCount-1&&r&&r.color==p||i.push(p);n.color=i[Math.floor(Math.random()*i.length)];var u=[];for(p=1;p<=9;p++)c&&c.value==p||e.length==this.ballCount-1&&r&&r.value==p||u.push(p);n.value=u[Math.floor(Math.random()*u.length)],o.position=this.node.convertToWorldSpaceAR(cc.v2(0,500)),n.indexRadius=500,n.indexAngle=Math.PI/2},r([l(cc.Prefab)],e.prototype,"ballPrefab",void 0),e=r([s],e)}(i.default);o.default=f,cc._RF.pop()},{"../../../Lemon/Common/Component/LabelBlindCpt":"LabelBlindCpt","../../../Lemon/ECS/Singleton":"Singleton","../Component/BallCpt":"BallCpt"}],BallCpt:[function(t,e,o){"use strict";cc._RF.push(e,"fd3feAkdrNA65616uBA2x/m","BallCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSprite=null,e._color=1,e.valueLabel=null,e._value=1,e._isSelect=!1,e.index=0,e.radius=0,e.indexRadius=0,e.angle=0,e.indexAngle=0,e}return n(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){if(this._color=t,this.bgSprite)switch(t){case 1:this.bgSprite.node.color=cc.color(200,0,0);break;case 2:this.bgSprite.node.color=cc.color(0,200,0);break;case 3:this.bgSprite.node.color=cc.color(0,0,200)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.valueLabel&&(this.valueLabel.string=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelect",{get:function(){return this._isSelect},set:function(t){this._isSelect=t,t?this.node.runAction(cc.scaleTo(.07,1.2)):this.node.runAction(cc.scaleTo(.07,1))},enumerable:!0,configurable:!0}),r([a(cc.Sprite)],e.prototype,"bgSprite",void 0),r([a(cc.Label)],e.prototype,"valueLabel",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],BuildingsCpt:[function(t,e,o){"use strict";cc._RF.push(e,"538e12QkShA57L5L+KcwmwU","BuildingsCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c,i=cc._decorator,a=i.ccclass,p=i.property;(function(t){t[t.kong=0]="kong",t[t.min_fang=1]="min_fang",t[t.lie_ren_fang=2]="lie_ren_fang",t[t.fa_mu_chang=3]="fa_mu_chang",t[t.tan_xian_hui=4]="tan_xian_hui",t[t.shi_chang=5]="shi_chang",t[t.nong_tian=6]="nong_tian"})(c=o.BuildType||(o.BuildType={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameLabel=null,e._type=c.kong,e.runCountLabel=null,e._runCount=0,e}return n(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){if(this._type=t,this.nameLabel)switch(t){case c.kong:this.nameLabel.string="\u7a7a";break;case c.min_fang:this.nameLabel.string="\u6c11\u623f";break;case c.lie_ren_fang:this.nameLabel.string="\u72e9\u730e\u573a";break;case c.fa_mu_chang:this.nameLabel.string="\u4f10\u6728\u573a";break;case c.tan_xian_hui:this.nameLabel.string="\u63a2\u7d22\u4f1a";break;case c.shi_chang:this.nameLabel.string="\u5e02\u573a";break;case c.nong_tian:this.nameLabel.string="\u519c\u7530"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"runCount",{get:function(){return this._runCount},set:function(t){this.runCountLabel&&(this.runCountLabel.string=t>0?t.toString():"")},enumerable:!0,configurable:!0}),r([p(cc.Label)],e.prototype,"nameLabel",void 0),r([p(cc.Label)],e.prototype,"runCountLabel",void 0),e=r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],BulletCpt:[function(t,e,o){"use strict";cc._RF.push(e,"784bdJ4OtBOPqELe5jvLo5Y","BulletCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dir=null,e}return n(e,t),e=r([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],ButtonEventCpt:[function(t,e,o){"use strict";cc._RF.push(e,"e059fYHEfZGjKfD5jpJww7h","ButtonEventCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="event_key",e}return n(e,t),e.prototype.start=function(){var t=this;this.node.on("click",function(){gm.EventManager.dispatchEvent(t.key)},this)},r([a],e.prototype,"key",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],CardConfig:[function(t,e,o){"use strict";var n;cc._RF.push(e,"77d36cIg11NNbZUHNWj4JfG","CardConfig"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator;r.ccclass,r.property;o.CardConfig=((n={})[1001]={name:"\u6218\u58eb",type:"hero",hp:10},n[2001]={name:"\u9ab7\u9ac5",type:"monster",atk:2,hp:3},n[2002]={name:"\u50f5\u6b7b",type:"monster",atk:1,hp:4},n[2009]={name:"\u4ea1\u7075\u6cd5\u5e08",type:"monster",atk:0,hp:10,skill:[{desc:"\u53ec\u5524\u4e00\u53ea\u9ab7\u9ac5"},{desc:"\u53ec\u5524\u4e00\u53ea\u50f5\u6b7b"}]},n[3001]={name:"\u6728\u5251",type:"prop",atk:2},n[3002]={name:"\u94c1\u5251",type:"prop",atk:4},n[3003]={name:"\u78e8\u5200\u77f3",type:"prop",desc:"\u653e\u5728\u80cc\u5305\u4e2d,\u6bcf\u56de\u5408\u968f\u673a\u7ed9\u4e00\u4e2a\u6b66\u5668\u52a01\u70b9\u653b\u51fb\u529b\u4f7f\u7528\u6b66\u5668\u540ebuff\u6d88\u5931"},n[3004]={name:"\u94c1\u76fe",type:"prop",def:3,desc:"\u6301\u7eed\u4e00\u56de\u54084\u70b9\u9632\u5fa1"},n[3005]={name:"\u8840\u74f6",type:"prop",hp:3},n),cc._RF.pop()},{}],CardCpt:[function(t,e,o){"use strict";cc._RF.push(e,"c4e0fphGUpIHJmwz7B6hyGn","CardCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueLabel=null,e._value=1,e.selectSprite=null,e._isSelect=!1,e.effectLabel=null,e._effect=1,e}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.valueLabel&&(this.valueLabel.string=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelect",{get:function(){return this._isSelect},set:function(t){this._isSelect=t,this.selectSprite&&(this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.07,1.2),cc.scaleTo(.07,1))),this.selectSprite.node.active=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effect",{get:function(){return this._effect},set:function(t){if(this._effect=t,this.effectLabel)switch(t){case 1:this.effectLabel.string="3\u6563\u5c04";break;case 2:this.effectLabel.string="5\u6563\u5c04";break;case 3:this.effectLabel.string="\u7206\u70b8";break;case 4:this.effectLabel.string="\u70b8\u5f39";break;case 5:this.effectLabel.string="\u5f39\u5c04";break;case 6:this.effectLabel.string="\u7a7f\u900f";break;default:this.effectLabel.string=""}},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.isSelect=!t.isSelect})},r([a(cc.Label)],e.prototype,"valueLabel",void 0),r([a(cc.Sprite)],e.prototype,"selectSprite",void 0),r([a(cc.Label)],e.prototype,"effectLabel",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],CardLandCardSlotCpt:[function(t,e,o){"use strict";cc._RF.push(e,"ff032rsAG9NYb+p0+Wuy3xb","CardLandCardSlotCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c,i=cc._decorator,a=i.ccclass,p=i.property;(function(t){t[t.UNHAND=0]="UNHAND",t[t.BAG=1]="BAG"})(c=o.CLSlotType||(o.CLSlotType={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=c.UNHAND,e.cardCpt=null,e}return n(e,t),r([p({type:cc.Enum(c)})],e.prototype,"type",void 0),e=r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],CardLandEventRouter:[function(t,e,o){"use strict";cc._RF.push(e,"308adHI0IlIHK7Fh2sL4Igq","CardLandEventRouter");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lemon/Common/System/PopupSingleton"),i=t("../../Lemon/ECS/Singleton"),a=cc._decorator,p=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){var t=this;cc.game.addPersistRootNode(this.node);for(var e=0,o=[{key:"go_to_CardLandMainScene",func:function(){cc.director.loadScene("CardLandMainScene")}},{key:"go_to_CardLandGameScene",func:function(){cc.director.loadScene("CardLandGameScene")}},{key:"game_giveup",func:function(){t.getCpt(c.default).addDialog("\u6e38\u620f\u7ed3\u675f,\u70b9\u51fb\u8fd4\u56de\u4e3b\u754c\u9762",{clickCallback:function(){cc.director.loadScene("CardLandMainScene")},closeMaskTouch:!0})}}];e<o.length;e++){var n=o[e];gm.EventManager.addEvent(n.key,n.func,this)}},e=r([p],e)}(i.default));o.default=u,cc._RF.pop()},{"../../Lemon/Common/System/PopupSingleton":"PopupSingleton","../../Lemon/ECS/Singleton":"Singleton"}],CardLandGameWorld:[function(t,e,o){"use strict";cc._RF.push(e,"326cbKP0E9K/6fOC7nWhRqj","CardLandGameWorld");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Lemon/ECS/World"),i=t("../Component/CardLandNodeCpt"),a=t("../Component/CardLandCardSlotCpt"),p=t("../System/CardLandTouchSystem"),u=t("../../../Lemon/Common/System/PopupSingleton"),s=t("../Config/CardConfig"),l=cc._decorator,f=l.ccclass,d=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardPrefab=null,e.unHandPosNode=null,e.goldNum=null,e.hpNum=null,e.infoLabel=null,e.isGameOver=!1,e.gold=0,e.hp=0,e.cardNodeList=[],e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.addSystem(p.default),gm.EventManager.addEvent("cardland_change",function(){t.runBattle(),t.removeBuff(),t.dealCards()},this),gm.EventManager.addEvent("cardland_push_card",function(e){t.pushCardNode(e.node)},this),gm.EventManager.addEvent("cardland_remove_card",function(e){t.removeCard(e.node)},this),gm.EventManager.addEvent("cardland_opr_card",function(){},this);this.initCardNode([1001,2001,2001,2001,2002,2002,2002,2009,2009,3001,3001,3001,3002,3002,3003,3004,3005,3005])},e.prototype.start=function(){this.gold=0,this.hp=10,this.dealCards(),this.updateInfoLabel()},e.prototype.update=function(t){this.goldNum&&(this.goldNum.string="\u91d1\u5e01:"+this.gold),this.hpNum&&(this.hpNum.string="HP:"+this.hp),this.isGameOver||this.updateInfoLabel()},e.prototype.initCardNode=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e];this.createOneCard(n)}},e.prototype.createOneCard=function(t){var e=cc.instantiate(this.cardPrefab);e.parent=cc.director.getScene(),e.position=this.unHandPosNode.convertToWorldSpaceAR(cc.v2());var o=e.getComponent(i.default),n=s.CardConfig[t];if(o.id=t,o.type=n.type,o.data=n,n.name&&(o.nameLabel.string=n.name),n.atk&&(o.atk=n.atk),n.def&&(o.def=n.def),n.hp&&(o.hp=n.hp),1001==t){var r=this.getCpt(a.default,function(t){return t.type==a.CLSlotType.BAG});e.position=r.node.convertToWorldSpaceAR(cc.v2()),o.slotCpt=r,r.cardCpt=o}else this.cardNodeList.push(e)},e.prototype.getRandomOneNode=function(){return this.cardNodeList.splice(Math.floor(Math.random()*this.cardNodeList.length),1)[0]},e.prototype.pushCardNode=function(t){t.position=this.unHandPosNode.convertToWorldSpaceAR(cc.v2()),t.getComponent(i.default).slotCpt=null,this.cardNodeList.push(t)},e.prototype.removeCard=function(t){var e=t.getComponent(i.default);e.slotCpt.cardCpt=null,e.slotCpt=null,t.destroy()},e.prototype.dealCards=function(){for(var t=this.getCpts(a.default,function(t){return t.type==a.CLSlotType.UNHAND}),e=0,o=t;e<o.length;e++){(p=o[e]).cardCpt&&(this.pushCardNode(p.cardCpt.node),p.cardCpt=null)}for(var n=0,r=0,c=t;r<c.length;r++){var p=c[r],u=this.getRandomOneNode(),s=u.getComponent(i.default);s.slotCpt=p,p.cardCpt=s;var l=p.node.convertToWorldSpaceAR(cc.v2()),f=cc.sequence(cc.delayTime(.05*n++),cc.moveTo(.1,l).easing(cc.easeQuadraticActionOut()));u.runAction(f)}},e.prototype.updateInfoLabel=function(){var t=this.getCpts(i.default,function(t){return"prop"==t.type}),e=this.getCpts(i.default,function(t){return"monster"==t.type});this.infoLabel.string="\u602a\u7269:"+e.length+"\n\u9053\u5177:"+t.length,e.length<=0&&(this.isGameOver=!0,this.getCpt(u.default).addDialog("\u5730\u7262\u7ed3\u675f,\u606d\u559c\u80dc\u5229",{clickCallback:function(){cc.director.loadScene("CardLandMainScene")},closeMaskTouch:!0}))},e.prototype.runBattle=function(){for(var t=this.getCpts(a.default,function(t){if(t.type==a.CLSlotType.UNHAND&&t.cardCpt&&"monster"==t.cardCpt.type)return!0}),e=this.getCpt(i.default,function(t){return"hero"==t.type}),o=0,n=t;o<n.length;o++){var r=n[o],c=e.def-r.cardCpt.atk;c<0?e.hp+=c:e.def-=r.cardCpt.atk,2009==r.cardCpt.id&&this.createOneCard(2001)}e.hp<=0&&(this.isGameOver=!0,this.getCpt(u.default).addDialog("\u82f1\u96c4\u6b7b\u4ea1,\u6e38\u620f\u7ed3\u675f",{clickCallback:function(){cc.director.loadScene("CardLandMainScene")},closeMaskTouch:!0}))},e.prototype.removeBuff=function(){this.getCpt(i.default,function(t){return"hero"==t.type}).def=0},r([d(cc.Prefab)],e.prototype,"cardPrefab",void 0),r([d(cc.Node)],e.prototype,"unHandPosNode",void 0),r([d(cc.Label)],e.prototype,"goldNum",void 0),r([d(cc.Label)],e.prototype,"hpNum",void 0),r([d(cc.Label)],e.prototype,"infoLabel",void 0),e=r([f],e)}(c.default);o.default=h,cc._RF.pop()},{"../../../Lemon/Common/System/PopupSingleton":"PopupSingleton","../../../Lemon/ECS/World":"World","../Component/CardLandCardSlotCpt":"CardLandCardSlotCpt","../Component/CardLandNodeCpt":"CardLandNodeCpt","../Config/CardConfig":"CardConfig","../System/CardLandTouchSystem":"CardLandTouchSystem"}],CardLandMainWorld:[function(t,e,o){"use strict";cc._RF.push(e,"6bc47GdCM9KWZ1UO8NrsmcE","CardLandMainWorld");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Lemon/ECS/World"),i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){},e=r([a],e)}(c.default));o.default=p,cc._RF.pop()},{"../../../Lemon/ECS/World":"World"}],CardLandNodeCpt:[function(t,e,o){"use strict";cc._RF.push(e,"c19aaP6pSdNAp66ngmWqnak","CardLandNodeCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameLabel=null,e.bgSprite=null,e.atkNode=null,e.hpNode=null,e.defNode=null,e.slotCpt=null,e.data=0,e._hp=0,e._uuid=0,e._atk=0,e._def=0,e}return n(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._uuid},set:function(t){this._uuid=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atk",{get:function(){return this._atk},set:function(t){this._atk=t,this.atkNode&&(t>0?(this.atkNode.active=!0,this.atkNode.getComponentInChildren(cc.Label).string=t.toString()):this.atkNode.active=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(t){this._hp=t,this.hpNode&&(t>0?(this.hpNode.active=!0,this.hpNode.getComponentInChildren(cc.Label).string=t.toString()):this.hpNode.active=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"def",{get:function(){return this._def},set:function(t){this._def=t,this.defNode&&(t>0?(this.defNode.active=!0,this.defNode.getComponentInChildren(cc.Label).string=t.toString()):this.defNode.active=!1)},enumerable:!0,configurable:!0}),r([a(cc.Label)],e.prototype,"nameLabel",void 0),r([a(cc.Sprite)],e.prototype,"bgSprite",void 0),r([a(cc.Node)],e.prototype,"atkNode",void 0),r([a(cc.Node)],e.prototype,"hpNode",void 0),r([a(cc.Node)],e.prototype,"defNode",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],CardLandTouchSystem:[function(t,e,o){"use strict";cc._RF.push(e,"f6160OAXLdL9IeeLSXXb8hG","CardLandTouchSystem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Lemon/ECS/System"),i=t("../Component/CardLandCardSlotCpt"),a=t("../Component/CardLandNodeCpt"),p=cc._decorator,u=p.ccclass,s=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectCpt=null,e.selectPos=cc.v2(),e}return n(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this)},e.prototype.onDestroy=function(){},e.prototype.touchCardNode=function(t){return this.getCpt(a.default,function(e){if("prop"==e.type&&e.slotCpt)return e.node.getBoundingBoxToWorld().contains(t)})},e.prototype.touchStart=function(t){var e=this.touchCardNode(t.getLocation());e&&(this.selectCpt=e,this.selectPos=this.selectCpt.node.position.clone(),this.selectCpt.node.scale=1.1,this.selectCpt.node.zIndex=100)},e.prototype.touchMove=function(t){this.selectCpt&&(this.selectCpt.node.position=this.selectPos.add(t.getLocation().sub(t.getStartLocation())))},e.prototype.touchEnd=function(t){if(this.selectCpt){var e=this.getCpt(i.default,function(e){return e.node.getBoundingBoxToWorld().contains(t.getLocation())});e&&null==e.cardCpt?(this.selectCpt.slotCpt.cardCpt=null,this.selectCpt.slotCpt=e,e.cardCpt=this.selectCpt,this.selectCpt.node.position=e.node.convertToWorldSpaceAR(cc.v2())):e&&e.cardCpt?"hero"==e.cardCpt.type?this.selectCpt.def>0?(e.cardCpt.def+=this.selectCpt.def,this.pushCardToHeap()):this.selectCpt.hp>0?(e.cardCpt.hp+=this.selectCpt.hp,this.pushCardToHeap()):this.selectCpt.node.position=this.selectPos:"monster"==e.cardCpt.type&&this.selectCpt.atk>0?(e.cardCpt.hp-=this.selectCpt.atk,e.cardCpt.hp<=0&&gm.EventManager.dispatchEvent("cardland_remove_card",e.cardCpt),this.pushCardToHeap()):this.selectCpt.node.position=this.selectPos:this.selectCpt.node.position=this.selectPos,this.selectCpt.node.scale=1,this.selectCpt.node.zIndex=1,this.selectCpt=null,this.selectPos=cc.v2()}},e.prototype.pushCardToHeap=function(){this.selectCpt&&(this.selectCpt.slotCpt.cardCpt=null,gm.EventManager.dispatchEvent("cardland_push_card",this.selectCpt))},e=r([u],e)}(c.default));o.default=s,cc._RF.pop()},{"../../../Lemon/ECS/System":"System","../Component/CardLandCardSlotCpt":"CardLandCardSlotCpt","../Component/CardLandNodeCpt":"CardLandNodeCpt"}],CardSingleton:[function(t,e,o){"use strict";cc._RF.push(e,"5395dK5zVJCmZgDEUXE3aRP","CardSingleton");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Component/CardCpt"),i=t("../ResMapCpt"),a=t("../../../Lemon/ECS/Singleton"),p=cc._decorator,u=p.ccclass,s=p.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numberCount=9,e.col=3,e.padding=110,e}return n(e,t),e.prototype.createNumberCard=function(){var t=this.getCpt(i.default),e=cc.instantiate(t.numberCardPrefab);e.parent=cc.director.getScene(),e.position=this.node.convertToWorldSpaceAR(cc.v2());var o=e.getComponent(c.default);return o.value=Math.floor(9*Math.random())+1,o.effect=Math.floor(6*Math.random())+1,o.isSelect=!1,e},e.prototype.initNumberCards=function(){for(var t=this.numberCount-this.getCpts(c.default).length,e=0;e<t;e++)this.createNumberCard()},e.prototype.updateCardsPos=function(){for(var t=this.getCpts(c.default),e=0;e<t.length;e++){var o=e%this.col,n=Math.floor(e/this.col),r=this.node.convertToWorldSpaceAR(cc.v2()).add(cc.v2(-.5*(this.col-1)*this.padding,-this.padding/2));t[e].node.runAction(cc.moveTo(.3,r.add(cc.v2(o*this.padding,-n*this.padding))).easing(cc.easeQuarticActionOut()))}},r([s],e.prototype,"numberCount",void 0),r([s],e.prototype,"col",void 0),r([s],e.prototype,"padding",void 0),e=r([u],e)}(a.default);o.default=l,cc._RF.pop()},{"../../../Lemon/ECS/Singleton":"Singleton","../Component/CardCpt":"CardCpt","../ResMapCpt":"ResMapCpt"}],ChangeBallWorld:[function(t,e,o){"use strict";cc._RF.push(e,"a39acV7rTBCXZXQSQttVFET","ChangeBallWorld");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lemon/ECS/World"),i=t("./Singleton/BallControlSge"),a=t("../../Lemon/Common/System/PopupSingleton"),p=cc._decorator,u=p.ccclass,s=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){var t=this;gm.EventManager.addEvent("go_to_main",function(){cc.director.loadScene("Main")},this),gm.EventManager.addEvent("add_ball",function(){t.getCpt(i.default).createBall()},this),gm.EventManager.addEvent("game_over",function(){t.getCpt(a.default).addDialog("\u6e38\u620f\u7ed3\u675f,\u70b9\u51fb\u8fd4\u56de\u4e3b\u754c\u9762",{clickCallback:function(){gm.EventManager.dispatchEvent("go_to_main")},closeMaskTouch:!0})},this)},e.prototype.start=function(){},e=r([u],e)}(c.default));o.default=s,cc._RF.pop()},{"../../Lemon/Common/System/PopupSingleton":"PopupSingleton","../../Lemon/ECS/World":"World","./Singleton/BallControlSge":"BallControlSge"}],DebugDraw:[function(t,e,o){"use strict";cc._RF.push(e,"a3ddfW/lZNLqpHhQuTtY3Ro","DebugDraw");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){var t=this.getComponent(cc.Graphics);if(t){var e=this.node.getContentSize();t.rect(-.5*e.width,-.5*e.height,e.width,e.height),t.stroke()}},e=r([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],DialogCpt:[function(t,e,o){"use strict";cc._RF.push(e,"04a6e2sf29Cs6ZasES1qzTK","DialogCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentLabel=null,e._content="",e.okButton=null,e}return n(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.contentLabel&&(this.contentLabel.string=t)},enumerable:!0,configurable:!0}),r([a(cc.Label)],e.prototype,"contentLabel",void 0),r([a(cc.Button)],e.prototype,"okButton",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"1e61cfm3p9EKKjfUiEVG/qU","EventManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){gm=gm||{},gm.EventManager=this},e.prototype.addEvent=function(t,e,o){this.node.on(t,e,o)},e.prototype.addEventOnce=function(t,e,o){this.node.once(t,e,o)},e.prototype.removeEvent=function(t,e,o){this.node.off(t,e,o)},e.prototype.dispatchEvent=function(t,e){this.node.emit(t,e)},e=r([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],FortCpt:[function(t,e,o){"use strict";cc._RF.push(e,"8e3baO2hSBK/YBEJvF5cYk6","FortCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetNumberLabel=null,e._targetNum=0,e.bulletPrefab=null,e.fireNum=1,e.cdTime=.5,e.indexCDTime=0,e}return n(e,t),Object.defineProperty(e.prototype,"targetNum",{get:function(){return this._targetNum},set:function(t){this.targetNumberLabel&&(this.targetNumberLabel.string=t.toString()),this._targetNum=t},enumerable:!0,configurable:!0}),r([a(cc.Label)],e.prototype,"targetNumberLabel",void 0),r([a(cc.Prefab)],e.prototype,"bulletPrefab",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],FortNumberWorld:[function(t,e,o){"use strict";cc._RF.push(e,"9df0asShtdNxZvPGn2npZOH","FortNumberWorld");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Lemon/ECS/World"),i=t("../Singleton/MonsterSingleton"),a=t("../../../Lemon/Common/System/PopupSingleton"),p=t("../System/FortSystem"),u=t("../Component/BulletCpt"),s=cc._decorator,l=s.ccclass,f=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){var t=this;cc.director.getCollisionManager().enabled=!0,gm.EventManager.addEvent("go_to_main",function(){cc.director.loadScene("Main")},this),gm.EventManager.addEvent("go_to_next_level",function(){t.getCptById("next_hit").node.runAction(cc.moveTo(.3,cc.v2(0,400))),t.scheduleOnce(function(){t.getCptById("next_hit").node.runAction(cc.moveTo(.3,cc.v2(0,900))),t.monsterSingleton.ready()},1)},this),gm.EventManager.addEvent("game_over",function(){t.getCpt(a.default).addDialog("GameOver,\u70b9\u51fb\u8fd4\u56de\u4e3b\u754c\u9762",{clickCallback:function(){gm.EventManager.dispatchEvent("go_to_main")},closeMaskTouch:!0})},this)},e.prototype.start=function(){this.fortSystem=this.addSystem(p.default),this.monsterSingleton=this.getCpt(i.default)},e.prototype.onUpdate=function(t){for(var e=0,o=this.getCpts(u.default);e<o.length;e++){var n=o[e];n.dir?n.node.position=n.node.position.add(n.dir.mul(700*t)):n.node.destroy()}},e=r([l],e)}(c.default));o.default=f,cc._RF.pop()},{"../../../Lemon/Common/System/PopupSingleton":"PopupSingleton","../../../Lemon/ECS/World":"World","../Component/BulletCpt":"BulletCpt","../Singleton/MonsterSingleton":"MonsterSingleton","../System/FortSystem":"FortSystem"}],FortSystem:[function(t,e,o){"use strict";cc._RF.push(e,"c05c0l920lKy7NiCBAhNTIw","FortSystem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Component/CardCpt"),i=t("../Component/MonsterCpt"),a=t("../Component/BulletCpt"),p=t("../../../Lemon/ECS/System"),u=t("../Component/FortCpt"),s=cc._decorator,l=s.ccclass,f=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onUpdate=function(t){for(var e=0,o=this.getCpts(u.default);e<o.length;e++)for(var n=o[e],r=0,i=this.getCpts(c.default);r<i.length;r++){var a=i[r];a.isSelect&&(a.isSelect=!1,1==a.effect?n.fireNum=3:2==a.effect&&(n.fireNum=5))}this.checkFire(t)},e.prototype.checkFire=function(t){for(var e=0,o=this.getCpts(u.default);e<o.length;e++){var n=o[e];if(n.indexCDTime<=0){n.indexCDTime=n.cdTime;for(var r=n.node.convertToWorldSpaceAR(cc.v2()),c=null,p=9999999999,s=0,l=this.getCpts(i.default);s<l.length;s++){var f=l[s].node.position.sub(r);f.magSqr()<p&&(p=f.magSqr(),c=f.normalize())}if(c)for(var d=function(t){var e=cc.instantiate(n.bulletPrefab);e.parent=cc.director.getScene(),e.position=r;var o=e.getComponent(a.default),i=t-(Math.floor(n.fireNum/2)+1);o.dir=c,0!=i&&(o.dir=cc.v2(o.dir).rotateSelf(i*Math.PI/25)),o.onCollisionEnter=function(t,o){e.destroy()}},h=1;h<=n.fireNum;h++)d(h)}else n.indexCDTime-=t}},e=r([l],e)}(p.default));o.default=f,cc._RF.pop()},{"../../../Lemon/ECS/System":"System","../Component/BulletCpt":"BulletCpt","../Component/CardCpt":"CardCpt","../Component/FortCpt":"FortCpt","../Component/MonsterCpt":"MonsterCpt"}],GM:[function(t,e,o){"use strict";cc._RF.push(e,"bd9bdbbbM5DLZMpX7C8rhF4","GM");cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.gm=this,cc.game.addPersistRootNode(this.node)},getSge:function(t){return this.node.getComponent(t)},getLocalItem:function(t){var e=cc.sys.localStorage.getItem(t);return JSON.parse(e)},setLocalItem:function(t,e){var o=JSON.stringify(e);cc.sys.localStorage.setItem(t,o)},onDestroy:function(){}});cc._RF.pop()},{}],IdCpt:[function(t,e,o){"use strict";cc._RF.push(e,"d688aPaKmJGEK/8OIcFjhFd","IdCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e}return n(e,t),r([a],e.prototype,"id",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],LabelBlindCpt:[function(t,e,o){"use strict";cc._RF.push(e,"e3653HQW0VEtJL7wOP+fPYF","LabelBlindCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="",e.valueLabel=null,e._value=1,e}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.valueLabel&&(this.valueLabel.string=t.toString())},enumerable:!0,configurable:!0}),r([a],e.prototype,"key",void 0),r([a(cc.Label)],e.prototype,"valueLabel",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],MainWorld:[function(t,e,o){"use strict";cc._RF.push(e,"e1803crFkhG26haPU1ZcBKm","MainWorld");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lemon/ECS/World"),i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){gm.EventManager.addEvent("go_to_fortnumber",function(){cc.director.loadScene("FortNumber")},this),gm.EventManager.addEvent("go_to_changeball",function(){cc.director.loadScene("ChangeBall")},this),gm.EventManager.addEvent("go_to_CardLandMainScene",function(){cc.director.loadScene("CardLandMainScene")},this),gm.EventManager.addEvent("go_to_CardLandGameScene",function(){cc.director.loadScene("CardLandGameScene")},this)},e=r([a],e)}(c.default));o.default=p,cc._RF.pop()},{"../../Lemon/ECS/World":"World"}],MonsterCpt:[function(t,e,o){"use strict";cc._RF.push(e,"22e7f9B3QpNLbjl2Lb8bLpa","MonsterCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSprite=null,e.valueLabel=null,e._value=1,e.speed=10,e.targetPos=null,e}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.valueLabel&&(this.valueLabel.string=t.toString())},enumerable:!0,configurable:!0}),r([a(cc.Sprite)],e.prototype,"bgSprite",void 0),r([a(cc.Label)],e.prototype,"valueLabel",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],MonsterSingleton:[function(t,e,o){"use strict";cc._RF.push(e,"b46e5spTJ5FLK4BJr5gcEW+","MonsterSingleton");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Component/MonsterCpt"),i=t("../../../Lemon/ECS/Singleton"),a=t("../ResMapCpt"),p=t("../Component/FortCpt"),u=cc._decorator,s=u.ccclass,l=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=0,e.isEnd=!1,e.isPass=!1,e}return n(e,t),e.prototype.ready=function(){this.isEnd=!1,this.isPass=!1,this.level++;for(var t=5*this.level,e=0;e<t;e++)this.createMonster()},e.prototype.clearAllMonster=function(){for(var t=0,e=this.getCpts(c.default);t<e.length;t++){e[t].node.destroy()}},e.prototype.createMonster=function(){var t=this.getCpt(a.default),e=cc.instantiate(t.monsterPrefab);e.parent=cc.director.getScene();var o=Math.random()*cc.winSize.width;o=Math.min(cc.winSize.width-30,o),o=Math.max(30,o),e.position=cc.v2(o,cc.winSize.height+300*Math.random());var n=e.getComponent(c.default);return n.onCollisionEnter=function(t,o){n.value-=1,e.stopAllActions(),e.runAction(cc.repeat(cc.sequence(cc.scaleTo(.1,1.3),cc.scaleTo(.1,1)),1)),n.value<=0&&e.destroy()},n.value=Math.floor(1+Math.random()*this.level*2),n.bgSprite.node.color=cc.color(255*Math.random(),255*Math.random(),255*Math.random()),n.speed=25,n.targetPos=this.getCpt(p.default).node.convertToWorldSpaceAR(cc.v2()),e},e.prototype.onUpdate=function(t){if(!this.isEnd){for(var e=this.getCpts(c.default),o=0,n=e;o<n.length;o++){var r=n[o];r.node.position=r.node.position.add(cc.v2(0,-1).mulSelf(r.speed*t)),r.node.position.y<=r.targetPos.y&&(this.clearAllMonster(),this.isEnd=!0,gm.EventManager.dispatchEvent("game_over"))}!this.isPass&&e.length<=0&&(this.isPass=!0,gm.EventManager.dispatchEvent("go_to_next_level"))}},e=r([s],e)}(i.default));o.default=l,cc._RF.pop()},{"../../../Lemon/ECS/Singleton":"Singleton","../Component/FortCpt":"FortCpt","../Component/MonsterCpt":"MonsterCpt","../ResMapCpt":"ResMapCpt"}],PopupCpt:[function(t,e,o){"use strict";cc._RF.push(e,"34d848p/DhEea5oaPZOrtZ5","PopupCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpen=!1,e.index=1,e.closeMaskTouch=!1,e}return n(e,t),r([a],e.prototype,"isOpen",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PopupScaleInCpt:[function(t,e,o){"use strict";cc._RF.push(e,"99797VaKFdKk6gPFv9TkSU8","PopupScaleInCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){this.node.scale=.01,this.node.runAction(cc.scaleTo(.15,1).easing(cc.easeQuarticActionOut()))},e=r([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],PopupSingleton:[function(t,e,o){"use strict";cc._RF.push(e,"de327wla3dFC4VCZijysFj5","PopupSingleton");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Component/PopupCpt"),i=t("../Component/DialogCpt"),a=t("../Component/PopupScaleInCpt"),p=t("../../ECS/Singleton"),u=cc._decorator,s=u.ccclass,l=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogPrefab=null,e.maskPrefab=null,e.maskNode=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.maskNode=cc.instantiate(this.maskPrefab),cc.game.addPersistRootNode(this.maskNode),this.maskNode.parent=cc.director.getScene(),this.maskNode.active=!1,this.maskNode.zIndex=-100,this.maskNode.on(cc.Node.EventType.TOUCH_END,function(){t.getTopPopup().closeMaskTouch||t.removeTopPopup()},this),gm.EventManager.addEvent("event_remove_popup_top",this.removeTopPopup,this),gm.EventManager.addEvent("event_dialog_ok",this.onDialogClickOk,this)},e.prototype.onDialogClickOk=function(t){cc.log(t)},e.prototype.getTopPopup=function(){var t=this.getCpts(c.default,function(t){return 0==t.isOpen});return t.sort(function(t,e){return t.index-e.index}),t.pop()},e.prototype.removeTopPopup=function(){var t=this.getTopPopup();t&&t.node.destroy(),this.scheduleOnce(this.onUpdatePopup)},e.prototype.onUpdatePopup=function(){var t=this.getCpts(c.default,function(t){return 0==t.isOpen});if(t.sort(function(t,e){return t.index-e.index}),t.length>0)for(var e=0;e<t.length;e++){var o=t[e];this.maskNode.active=!0,o.node.zIndex=1e3+2*o.index,e==t.length-1&&(this.maskNode.zIndex=1e3+2*o.index-1)}else this.maskNode.active=!1,this.maskNode.zIndex=-100},e.prototype.addPopupByNode=function(t,e){e=e||{};var o=this.getCpts(c.default),n=t.addComponent(c.default);n.isOpen=!1,n.index=o.length+1,e.closeMaskTouch&&(n.closeMaskTouch=e.closeMaskTouch),this.onUpdatePopup()},e.prototype.addDialog=function(t,e){e=e||{};var o=cc.instantiate(this.dialogPrefab);o.parent=cc.director.getScene(),o.position=cc.v2(cc.winSize.width/2,cc.winSize.height/2),o.addComponent(a.default);var n=o.getComponent(i.default);n.content=t,e.clickCallback&&n.okButton.node.on("click",e.clickCallback),this.addPopupByNode(o,e)},r([l(cc.Prefab)],e.prototype,"dialogPrefab",void 0),r([l(cc.Prefab)],e.prototype,"maskPrefab",void 0),e=r([s],e)}(p.default);o.default=f,cc._RF.pop()},{"../../ECS/Singleton":"Singleton","../Component/DialogCpt":"DialogCpt","../Component/PopupCpt":"PopupCpt","../Component/PopupScaleInCpt":"PopupScaleInCpt"}],ResMapCpt:[function(t,e,o){"use strict";cc._RF.push(e,"63236ji1dxN/ZDTyTGynEnp","ResMapCpt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monsterPrefab=null,e.numberCardPrefab=null,e.bulletPrefab=null,e}return n(e,t),r([a(cc.Prefab)],e.prototype,"monsterPrefab",void 0),r([a(cc.Prefab)],e.prototype,"numberCardPrefab",void 0),r([a(cc.Prefab)],e.prototype,"bulletPrefab",void 0),e=r([i],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"f9a90kmZWFGXZzWU2V3/lNv","Singleton");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./World"),i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.world=null,e}return n(e,t),e.prototype.onLoad=function(){this.getWorld().addSingleton(this),this.onInit()},e.prototype.onInit=function(){},e.prototype.onUpdate=function(t){},e.prototype.getWorld=function(){return null==this.world&&(this.world=cc.find("Canvas").getComponent(c.default)),this.world},e.prototype.getCpt=function(t,e){return this.getWorld().getCpt(t,e)},e.prototype.getCpts=function(t,e){return this.getWorld().getCpts(t,e)},e.prototype.getCptById=function(t){return this.getWorld().getCptById(t)},e=r([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"./World":"World"}],System:[function(t,e,o){"use strict";cc._RF.push(e,"5bd56hH8OhGxLGxm5JAZwHI","System");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.world=null,e}return n(e,t),e.prototype.onInit=function(){},e.prototype.onUpdate=function(t){},e.prototype.getCpt=function(t,e){return this.world.getCpt(t,e)},e.prototype.getCpts=function(t,e){return this.world.getCpts(t,e)},e.prototype.getCptById=function(t){return this.world.getCptById(t)},e=r([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],VillageSimulator:[function(t,e,o){"use strict";cc._RF.push(e,"21891XXKOBOc7ELYNiUDNM2","VillageSimulator");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lemon/ECS/World"),i=t("./Component/BuildingsCpt"),a=t("../../Lemon/Common/System/PopupSingleton"),p=cc._decorator,u=p.ccclass,s=p.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.exploreValue=0,e.buildPrefab=null,e.oprPanelPrefab=null,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){for(var t=0,e=[i.BuildType.min_fang,i.BuildType.lie_ren_fang,i.BuildType.fa_mu_chang];t<e.length;t++){var o=e[t];this.createBuild(o)}},e.prototype.createBuild=function(t){var e=this,o=cc.instantiate(this.buildPrefab);o.parent=this.getCptById("buildings_layout").node,o.getComponent(i.default).type=t,o.on("click",function(){e.getCpt(a.default).addPopup(e.oprPanelPrefab)},this)},e.prototype.onUpdate=function(t){},r([s(cc.Prefab)],e.prototype,"buildPrefab",void 0),r([s(cc.Prefab)],e.prototype,"oprPanelPrefab",void 0),e=r([u],e)}(c.default);o.default=l,cc._RF.pop()},{"../../Lemon/Common/System/PopupSingleton":"PopupSingleton","../../Lemon/ECS/World":"World","./Component/BuildingsCpt":"BuildingsCpt"}],World:[function(t,e,o){"use strict";cc._RF.push(e,"f63d1acW7NHU5HvsiAfmwVA","World");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Common/IdCpt"),i=cc._decorator,a=i.ccclass,p=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeScale=1,e.systemList=[],e.singletonList=[],e}return n(e,t),e.prototype.addSystem=function(t){var e=this.node.addComponent(t);return e.world=this,e.onInit(),this.systemList.push(e),e},e.prototype.addSingleton=function(t){this.singletonList.push(t)},e.prototype.getSystem=function(t){return this.node.getComponent(t)},e.prototype.getCpt=function(t,e){return this.getCpts(t,e)[0]},e.prototype.getCpts=function(t,e){for(var o=[],n=0,r=cc.director.getScene().getComponentsInChildren(t);n<r.length;n++){var c=r[n];e?e(c)&&o.push(c):o.push(c)}return o},e.prototype.getCptById=function(t){return this.getCpt(c.default,function(e){return e.id==t})},e.prototype.update=function(t){t*=this.timeScale,this.onUpdate(t);for(var e=0,o=this.systemList;e<o.length;e++){o[e].onUpdate(t)}for(var n=0,r=this.singletonList;n<r.length;n++){r[n].onUpdate(t)}},e.prototype.onUpdate=function(t){},e=r([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Common/IdCpt":"IdCpt"}]},{},["CardLandEventRouter","CardLandCardSlotCpt","CardLandNodeCpt","CardConfig","CardLandTouchSystem","CardLandGameWorld","CardLandMainWorld","ChangeBallWorld","BallCpt","BallControlSge","BulletCpt","CardCpt","FortCpt","MonsterCpt","ResMapCpt","CardSingleton","MonsterSingleton","FortSystem","FortNumberWorld","ButtonEventCpt","DialogCpt","LabelBlindCpt","PopupCpt","PopupScaleInCpt","DebugDraw","EventManager","IdCpt","MainWorld","PopupSingleton","Singleton","System","World","GM","BuildingsCpt","VillageSimulator"]);